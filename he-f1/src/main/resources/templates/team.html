<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
    <title>Team - HE-F1</title>

    <head th:replace="fragments/fragments.html :: header"></head>
</head>

<body>
    <!-- Replace fragment  -->
    <div th:replace="fragments/fragments.html :: navigation"></div>

    <div class="container mt-sm-3" th:if="${teamToCreate != null}">
        <div class="alert alert-danger" role="alert">
            You are not part of any team at the moment...
        </div>
        <button type="button" class="btn btn-danger btn-block" data-bs-toggle="modal" data-bs-target="#teamDialog">
            Create a team
        </button>
        <th:block th:replace="fragments/teamdialog.html :: teamDialog"></th:block>
    </div>

    <div th:if="${teamToCreate == null}" th:object="${team}" style="margin:30px;">
        <div class="row justify-content-between">
            <div class="col-9">
                <h1 th:text="*{name}"></h1>
            </div>
            <div class="col-3">
                <h3 th:text="*{'Budget : ' + budget + '$'}"></h3>
            </div>
        </div>
        <div style="margin-bottom:10px;" class="row justify-content-between">
            <div class="col-3">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Piece's name" aria-label="search"
                        aria-describedby="search">
                    <div class="input-group-append">
                        <button class="btn btn-outline-danger" type="button" id="search">Search</button>
                    </div>
                </div>
            </div>
            <div class="col-3 btn-group" role="group" aria-label="select-car">
                <button type="button" class="btn btn-danger">Pierre Gasly</button>
                <button type="button" class="btn btn-outline-danger">Yuki Tsunoda</button>
            </div>
        </div>
        <!-- Pieces list -->
        <div class="row justify-content-between">
            <div class="col-3">
                <ul class="list-group">
                    <li class="list-group-item" th:each="carPiece: ${carPieces}">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1"
                                th:text="${carPiece.piece.name}">
                            </h5>
                        </div>
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1"></h5>
                            <small th:text="${'Usure   :' + carPiece.wear + '%'}"></small>
                        </div>
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1"></h5>
                            <small th:text="${'Level  :' + carPiece.level}"></small>
                        </div>
                        
                        <div class="d-flex w-100 justify-content-between">
                            <p class="mb-1"
                                th:text="${'Repair   :' + carPiece.piece.baseRepairPrice * carPiece.level + '$'}">
                            </p>
                            <p class="mb-1"
                                th:text="${'Repair time :' + carPiece.piece.baseRepairTime * carPiece.level}">
                            </p>
                            <button type="submit" class="btn-sm btn-danger mb-1">Repair</button>
                        </div>

                        <div th:object="${car}" class="d-flex w-100 justify-content-between">
                            <p class="mb-1"
                                th:text="${'Upgrade :' + carPiece.piece.baseUpgradePrice * carPiece.level + '$'}">
                            </p>
                            <button type="submit" class="btn-sm btn-danger">Upgrade</button>
                        </div>
                        <!-- <form class="form-inline my-2 my-lg-0" th:object="${todo}" th:action="@{/todoByAuthor}" method="get">
                            <input type="text" name="selectedAuthor" class="form-control" />
                            <input type="submit" class="btn btn-outline-success my-2 my-sm-0 mt-1" value="Rechercher par auteur"/>
                        </form> -->
                    </li>
                </ul>
            </div>
            <div class="col-9">
                <div class="card">
                    <img width="100%" height="auto" th:src="@{*{getCarImagePath()}}" th:alt="${car.name}" />
                </div>
            </div>
        </div>
    </div>

    <!-- <div th:each="team: ${teams}" style="margin:30px;">
			<div class="row justify-content-between">
			    <div class="col-3">
			      <h1 th:text="${team.name}"></h1>
			    </div>
			    <div class="col-2">
			      <h3 th:text="${'Budget : ' + team.budget + '$'}"></h3>
			    </div>
		  	</div>
		  	<div style="margin-bottom:10px;" class="row justify-content-between">
		  		<div class="col-3">
		  		  <div class="input-group mb-3">
					  <input type="text" class="form-control" placeholder="Piece's name" aria-label="search" aria-describedby="search">
					  <div class="input-group-append">
					    <button class="btn btn-outline-danger" type="button" id="search">Search</button>
					  </div>
					</div>
		  		</div>
		  		<div class="col-3 btn-group" role="group" aria-label="select-car">
				  <button type="button" class="btn btn-danger">Pierre Gasly</button>
				  <button type="button" class="btn btn-outline-danger">Yuki Tsunoda</button>
				</div>
		  	</div>
		  	<div class="row justify-content-between">
		  		<div class="col-3">
				  	<ul class="list-group">
					  <li class="list-group-item">
					  	<div class="d-flex w-100 justify-content-between">
					      <h5 class="mb-1">Front wing</h5>
					      <small>usure : 90%</small>
					    </div>
					    <div class="d-flex w-100 justify-content-between">
					    	<p class="mb-1">Réparation : 10'000$</p>
					    	<button type="submit" class="btn-sm btn-danger mb-1">Réparer</button>
					    </div>
					    <div class="d-flex w-100 justify-content-between">
					    	<p class="mb-1">Amélioration : 35'000$</p>
					    	<button type="submit" class="btn-sm btn-danger">Améliorer</button>
					    </div>
					  </li>
					  <li class="list-group-item">A second item</li>
					  <li class="list-group-item">A third item</li>
					  <li class="list-group-item">A fourth item</li>
					  <li class="list-group-item">And a fifth one</li>
					</ul>
				</div>
				<div class="col-9">
					<div class="card">
				  		<img width="100%" height="auto" th:src="@{/images/${team.name}.png}" alt="at02">
				  	</div>
				</div>
		  	</div>
		</div> -->

    <div th:replace="fragments/fragments.html :: scripts"></div>
    <script>
        var teamDialog = document.getElementById('teamDialog')

        teamDialog.addEventListener('show.bs.modal', function (event) {
            // Button that triggered the modal
            var button = event.relatedTarget
        })
    </script>
</body>

</html>